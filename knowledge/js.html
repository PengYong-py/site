<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>js相关 | 修真</title>
    <meta name="description" content="A VitePress Site">
    <meta name="generator" content="VitePress v1.3.1">
    <link rel="preload stylesheet" href="/site/assets/style.qr2BCBgD.css" as="style">
    
    <script type="module" src="/site/assets/app.oMTrjIUq.js"></script>
    <link rel="preload" href="/site/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/site/assets/chunks/framework.CzlNzQcO.js">
    <link rel="modulepreload" href="/site/assets/chunks/theme.DPA8TOG8.js">
    <link rel="modulepreload" href="/site/assets/knowledge_js.md.CyxJlkY_.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar top" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle" data-v-6aa21345 data-v-ab179fa1><a class="title" href="/site/" data-v-ab179fa1><!--[--><!--]--><!----><span data-v-ab179fa1>修真</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/site/" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>Home</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b6c34ac9><span class="text" data-v-b6c34ac9><!----><span data-v-b6c34ac9>基建</span><span class="vpi-chevron-down text-icon" data-v-b6c34ac9></span></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/site/Infrastructure/github.html" data-v-43f1e123><!--[-->静态站点<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b6c34ac9><span class="text" data-v-b6c34ac9><!----><span data-v-b6c34ac9>规范</span><span class="vpi-chevron-down text-icon" data-v-b6c34ac9></span></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/site/specification/js.html" data-v-43f1e123><!--[-->js<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/site/specification/css.html" data-v-43f1e123><!--[-->css<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup active" data-v-dc692963 data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b6c34ac9><span class="text" data-v-b6c34ac9><!----><span data-v-b6c34ac9>知识总结</span><span class="vpi-chevron-down text-icon" data-v-b6c34ac9></span></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link active" href="/site/knowledge/js.html" data-v-43f1e123><!--[-->js<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/site/knowledge/css.html" data-v-43f1e123><!--[-->css<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/site/knowledge/vue.html" data-v-43f1e123><!--[-->vue<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/site/knowledge/manage.html" data-v-43f1e123><!--[-->管理<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/site/knowledge/http.html" data-v-43f1e123><!--[-->网络<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/site/knowledge/vue2-vue3.html" data-v-43f1e123><!--[-->vue2-vue3<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/site/knowledge/vue2tovue3.html" data-v-43f1e123><!--[-->vue2迁移vue3<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-b6c34ac9><span class="vpi-more-horizontal icon" data-v-b6c34ac9></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-17a5e62e><button data-v-17a5e62e>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _site_knowledge_js" data-v-39a288b8><div><h1 id="js相关" tabindex="-1">js相关 <a class="header-anchor" href="#js相关" aria-label="Permalink to &quot;js相关&quot;">​</a></h1><h2 id="原始类型有哪几种-null-是对象嘛" tabindex="-1">原始类型有哪几种？null 是对象嘛？ <a class="header-anchor" href="#原始类型有哪几种-null-是对象嘛" aria-label="Permalink to &quot;原始类型有哪几种？null 是对象嘛？&quot;">​</a></h2><ul><li>原始类型：JavaScript 中有七种原始类型：Undefined, Null, Boolean, Number, BigInt, String, 和 Symbol。</li><li>Null：null 是一个表示“没有对象”的特殊值。虽然 typeof null 返回 &quot;object&quot;，但这只是一个历史遗留问题，null 实际上并不是对象。</li></ul><h2 id="对象类型和原始类型的不同之处-函数参数是对象会发生什么问题" tabindex="-1">对象类型和原始类型的不同之处？函数参数是对象会发生什么问题？ <a class="header-anchor" href="#对象类型和原始类型的不同之处-函数参数是对象会发生什么问题" aria-label="Permalink to &quot;对象类型和原始类型的不同之处？函数参数是对象会发生什么问题？&quot;">​</a></h2><h3 id="_1-存储方式" tabindex="-1">1. 存储方式 <a class="header-anchor" href="#_1-存储方式" aria-label="Permalink to &quot;1. 存储方式&quot;">​</a></h3><ul><li><p><strong>原始类型</strong> ：存储的是值本身。</p><ul><li>原始类型的数据直接存储在变量中。它们在内存中分配固定大小的空间，因此它们的操作是按值操作。</li><li>例如，数字、字符串、布尔值、null 和 undefined 都是原始类型。</li></ul></li><li><p><strong>对象类型</strong>：存储的是引用（即内存地址）。</p><ul><li>对象类型的数据在变量中存储的是对内存中实际数据位置的引用。对象本身可以很大，所以它们的操作是按引用操作。</li><li>例如，对象、数组、函数等都是对象类型。</li></ul></li></ul><h3 id="_2-可变性" tabindex="-1">2.可变性 <a class="header-anchor" href="#_2-可变性" aria-label="Permalink to &quot;2.可变性&quot;">​</a></h3><ul><li><strong>原始类型</strong>：是不可变的（immutable）。 <ul><li>一旦创建，原始类型的值就不能被改变。例如，字符串一旦创建就不能被修改，所有对字符串的操作都会生成一个新的字符串。</li></ul></li><li><strong>对象类型</strong>：是可变的（mutable）。 <ul><li>对象的属性和方法可以被修改，添加或删除。</li></ul></li></ul><h3 id="_3-比较方式" tabindex="-1">3.比较方式 <a class="header-anchor" href="#_3-比较方式" aria-label="Permalink to &quot;3.比较方式&quot;">​</a></h3><ul><li><strong>原始类型</strong>：比较的是值本身。 <ul><li>如果两个原始类型的值相等，那么它们就是相等的。</li></ul></li><li><strong>对象类型</strong>：比较的是引用（即内存地址）。 <ul><li>如果两个对象的引用相同，那么它们就是相等的；否则，即使它们的内容相同，它们也是不相等的。</li></ul></li></ul><h3 id="_4-函数参数" tabindex="-1">4.函数参数 <a class="header-anchor" href="#_4-函数参数" aria-label="Permalink to &quot;4.函数参数&quot;">​</a></h3><ul><li>当函数参数是对象时，传递的是对象的引用。这意味着函数内部对参数的修改会影响到外部对象。</li></ul><h2 id="typeof-是否能正确判断类型-instanceof-能正确判断对象的原理是什么" tabindex="-1">typeof 是否能正确判断类型？instanceof 能正确判断对象的原理是什么？ <a class="header-anchor" href="#typeof-是否能正确判断类型-instanceof-能正确判断对象的原理是什么" aria-label="Permalink to &quot;typeof 是否能正确判断类型？instanceof 能正确判断对象的原理是什么？&quot;">​</a></h2><ul><li><strong>typeof</strong>：在大多数情况下可以正确判断原始类型，但对于对象类型只能判断是否为对象或函数，无法进一步细分。此外，typeof null 返回 &quot;object&quot; 是一个历史遗留的 bug。</li><li><strong>instanceof</strong>：通过原型链判断一个对象是否是某个构造函数的实例，非常强大和准确，但在跨全局环境时可能会失效。此外，可以通过自定义 Symbol.hasInstance 来改变其行为。</li></ul><h2 id="如何正确判断-this-箭头函数的-this-是什么" tabindex="-1">如何正确判断 this？箭头函数的 this 是什么？ <a class="header-anchor" href="#如何正确判断-this-箭头函数的-this-是什么" aria-label="Permalink to &quot;如何正确判断 this？箭头函数的 this 是什么？&quot;">​</a></h2><p><img src="/site/assets/this.CM5Exrc8.png" alt="An image"></p><ul><li>箭头函数的 this 具有不同的行为，它捕获创建箭头函数时上下文的 this 值，而不是调用时的 this 值。箭头函数没有自己的 this，它从包含它的最近的常规（非箭头）函数的 this 值中继承。</li></ul><h2 id="浅拷贝和深拷贝" tabindex="-1">浅拷贝和深拷贝 <a class="header-anchor" href="#浅拷贝和深拷贝" aria-label="Permalink to &quot;浅拷贝和深拷贝&quot;">​</a></h2><ul><li><p><strong>浅拷贝</strong> 浅拷贝是指创建一个新对象，这个对象有着原始对象属性值的精确副本。如果属性是基本类型，拷贝的就是基本类型的值；如果属性是引用类型，拷贝的就是内存地址，因此如果其中一个对象改变了这个地址，另一个对象也会受到影响。</p></li><li><p><strong>实现浅拷贝的方法</strong></p></li></ul><ol><li>使用 Object.assign() 方法</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { a: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b: { c: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> shallowCopy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">assign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({}, obj);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(shallowCopy); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// { a: 1, b: { c: 2 } }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">shallowCopy.b.c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj.b.c); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 3 (原对象也被修改)</span></span></code></pre></div><ol start="2"><li>使用展开运算符（spread operator）</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { a: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b: { c: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> shallowCopy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(shallowCopy); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// { a: 1, b: { c: 2 } }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">shallowCopy.b.c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj.b.c); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 3 (原对象也被修改)</span></span></code></pre></div><ol start="3"><li>使用 Array.prototype.slice() 方法</li><li>使用 Array.prototype.concat() 方法</li></ol><ul><li><p><strong>深拷贝</strong> 深拷贝是指创建一个新对象，这个对象有着原始对象属性值的完全独立的副本。如果属性是基本类型，拷贝的就是基本类型的值；如果属性是引用类型，会拷贝引用类型到内存中，并递归地拷贝所有属性。这意味着如果其中一个对象改变了这个地址，另一个对象不会受到影响。</p></li><li><p><strong>实现深拷贝的方法</strong></p></li></ul><ol><li>使用 JSON.parse() 和 JSON.stringify() 方法(这种方法只能处理不包含函数、undefined、Symbol 和循环引用的对象。)</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { a: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b: { c: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> deepCopy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(deepCopy); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// { a: 1, b: { c: 2 } }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">deepCopy.b.c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj.b.c); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 2 (原对象未被修改)</span></span></code></pre></div><ol start="2"><li>使用递归函数</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> deepClone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;object&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Array.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasOwnProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(key)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      result[key] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> deepClone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value[key])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol start="3"><li>使用 Lodash 库的 cloneDeep() 方法</li><li>使用 jQuery 的 extend() 方法</li></ol><h2 id="请解释一下javascript中的闭包-closure-以及闭包的实际应用场景。" tabindex="-1">请解释一下JavaScript中的闭包（closure），以及闭包的实际应用场景。 <a class="header-anchor" href="#请解释一下javascript中的闭包-closure-以及闭包的实际应用场景。" aria-label="Permalink to &quot;请解释一下JavaScript中的闭包（closure），以及闭包的实际应用场景。&quot;">​</a></h2><p>闭包是指在函数内部定义的函数可以访问其外部函数的变量。换句话说，闭包是由函数和其词法环境的组合而成，这个环境包含了这个函数在定义时所能访问的所有局部变量。</p><p>数据隐藏和封装： 函数工厂 闭包可以用于模块化开发，定义模块的私有成员和公开接口。</p><h2 id="请解释一下javascript的事件冒泡-event-bubbling-和事件捕获-event-capturing-机制-并说明如何使用事件委托-event-delegation-优化事件处理。" tabindex="-1">请解释一下JavaScript的事件冒泡（event bubbling）和事件捕获（event capturing）机制，并说明如何使用事件委托（event delegation）优化事件处理。 <a class="header-anchor" href="#请解释一下javascript的事件冒泡-event-bubbling-和事件捕获-event-capturing-机制-并说明如何使用事件委托-event-delegation-优化事件处理。" aria-label="Permalink to &quot;请解释一下JavaScript的事件冒泡（event bubbling）和事件捕获（event capturing）机制，并说明如何使用事件委托（event delegation）优化事件处理。&quot;">​</a></h2><ul><li>事件冒泡:事件冒泡是指事件从最具体的元素（事件的目标元素）开始，逐级向上传播到最不具体的元素（通常是文档或窗口）。在事件冒泡阶段，事件处理程序按照从内到外的顺序执行。</li><li>事件捕获:事件捕获是指事件从最不具体的元素（通常是文档或窗口）开始，逐级向下传播到最具体的元素（事件的目标元素）。在事件捕获阶段，事件处理程序按照从外到内的顺序执行。</li><li>事件委托:事件委托是一种利用事件冒泡机制，将事件处理程序添加到父元素，而不是每个子元素上，从而优化性能和简化代码。当子元素数量众多或频繁变化时，事件委托尤其有用。</li><li>事件冒泡：事件从最具体的元素向上传播到最不具体的元素。</li><li>事件捕获：事件从最不具体的元素向下传播到最具体的元素。</li><li>事件委托：利用事件冒泡，将事件处理程序添加到父元素，从而优化性能和简化代码。</li></ul><h2 id="请解释一下javascript的原型-prototype-和原型链-prototype-chain-以及它们在继承中的作用。" tabindex="-1">请解释一下JavaScript的原型（prototype）和原型链（prototype chain），以及它们在继承中的作用。 <a class="header-anchor" href="#请解释一下javascript的原型-prototype-和原型链-prototype-chain-以及它们在继承中的作用。" aria-label="Permalink to &quot;请解释一下JavaScript的原型（prototype）和原型链（prototype chain），以及它们在继承中的作用。&quot;">​</a></h2><ul><li><p>JavaScript的原型（prototype）和原型链（prototype chain）：在JavaScript中，每个对象都有一个隐藏的属性[[Prototype]]（通常可以通过__proto__访问），它指向该对象的原型对象。原型对象本身也有一个[[Prototype]]，指向更高一级的原型对象，如此形成一个链条，称为原型链。</p></li><li><p>原型和原型链的工作原理：当你访问一个对象的属性时，JavaScript会首先在该对象自身上查找该属性。如果找不到，它会沿着原型链向上查找，直到找到该属性或到达原型链的顶端（即Object.prototype）。 原型链中的继承：原型链在继承中起到重要作用，使对象可以共享方法和属性，从而实现代码复用。</p></li></ul><h2 id="请解释一下javascript的事件循环-event-loop-机制-以及它是如何处理异步任务的。" tabindex="-1">请解释一下JavaScript的事件循环（Event Loop）机制，以及它是如何处理异步任务的。 <a class="header-anchor" href="#请解释一下javascript的事件循环-event-loop-机制-以及它是如何处理异步任务的。" aria-label="Permalink to &quot;请解释一下JavaScript的事件循环（Event Loop）机制，以及它是如何处理异步任务的。&quot;">​</a></h2><ul><li>执行宏任务（Task）：从任务队列（Task Queue）中取出第一个宏任务并执行。宏任务包括初始化代码、setTimeout、setInterval、I/O操作等。</li><li>查询是否有微任务（Microtask）：在每个宏任务执行完后，事件循环会检查微任务队列（Microtask Queue）是否为空。微任务包括Promise的回调函数、MutationObserver等。</li><li>执行微任务：如果有微任务，将它们全部执行完。执行过程中产生的新微任务会被添加到微任务队列中，直到队列为空。</li><li>检查是否需要重新渲染页面：在每次宏任务和所有微任务执行完之后，浏览器会检查是否需要重新渲染页面（UI更新）。</li><li>重复上述步骤：事件循环重复上述步骤，不断地从宏任务队列中取任务执行。</li><li>宏任务（Task）：包括setTimeout、setInterval、I/O等。</li><li>微任务（Microtask）：包括Promise的回调、MutationObserver等。</li><li>事件循环（Event Loop）：不断执行宏任务和微任务，确保JavaScript能够高效地处理异步任务。</li></ul><h2 id="什么是提升-什么是暂时性死区-var、let-及-const-区别" tabindex="-1">什么是提升？什么是暂时性死区？var、let 及 const 区别？ <a class="header-anchor" href="#什么是提升-什么是暂时性死区-var、let-及-const-区别" aria-label="Permalink to &quot;什么是提升？什么是暂时性死区？var、let 及 const 区别？&quot;">​</a></h2><ul><li>提升（Hoisting）：在JavaScript中，变量和函数声明会被提升到其作用域的顶部。这意味着你可以在声明之前使用变量和函数，但它们的值或行为可能未定义。</li><li>暂时性死区（Temporal Dead Zone）：在ES6中，let和const声明的变量具有暂时性死区。这意味着在变量声明之前，无法访问该变量，否则会抛出ReferenceError。</li><li>var、let 及 const 区别： <ul><li>var：函数作用域，存在提升，可以重复声明，没有块级作用域。</li><li>let：块级作用域，不存在提升，不能重复声明，有暂时性死区。</li><li>const：块级作用域，不存在提升，不能重复声明，有暂时性死区，但必须初始化。</li></ul></li></ul><h2 id="为什么要使用模块化-都有哪几种方式可以实现模块化-各有什么特点" tabindex="-1">为什么要使用模块化？都有哪几种方式可以实现模块化，各有什么特点？ <a class="header-anchor" href="#为什么要使用模块化-都有哪几种方式可以实现模块化-各有什么特点" aria-label="Permalink to &quot;为什么要使用模块化？都有哪几种方式可以实现模块化，各有什么特点？&quot;">​</a></h2><h3 id="为什么要使用模块化" tabindex="-1">为什么要使用模块化？ <a class="header-anchor" href="#为什么要使用模块化" aria-label="Permalink to &quot;为什么要使用模块化？&quot;">​</a></h3><ol><li>代码组织：模块化使代码结构更加清晰，每个模块负责特定的功能或逻辑，易于理解和管理。</li><li>代码重用：模块可以在不同的项目或应用中复用，避免重复编写相同的代码。</li><li>团队协作：不同的开发人员可以并行开发不同的模块，减少冲突和依赖。</li><li>维护和扩展：修改一个模块的实现不会影响其他模块，有助于系统的维护和扩展。</li><li>隔离：模块化可以降低不同代码块之间的耦合度，使得代码更易于测试和调试。</li></ol><h3 id="不同的模块化方式各有优缺点和适用场景" tabindex="-1">不同的模块化方式各有优缺点和适用场景： <a class="header-anchor" href="#不同的模块化方式各有优缺点和适用场景" aria-label="Permalink to &quot;不同的模块化方式各有优缺点和适用场景：&quot;">​</a></h3><ul><li>CommonJS：适用于服务器端（Node.js），同步加载模块。</li><li>AMD：适用于浏览器端，支持异步加载。</li><li>CMD：与 AMD 类似，支持延迟加载，主要用于浏览器端。</li><li>ESM：现代 JavaScript 标准，支持静态分析和异步加载，逐渐成为主流。</li><li>UMD：兼容多种环境，适用于需要广泛兼容性的库。</li></ul><h2 id="promise-的特点是什么-分别有什么优缺点-什么是-promise-链-promise-构造函数执行和-then-函数执行有什么区别" tabindex="-1">Promise 的特点是什么，分别有什么优缺点？什么是 Promise 链？Promise 构造函数执行和 then 函数执行有什么区别？ <a class="header-anchor" href="#promise-的特点是什么-分别有什么优缺点-什么是-promise-链-promise-构造函数执行和-then-函数执行有什么区别" aria-label="Permalink to &quot;Promise 的特点是什么，分别有什么优缺点？什么是 Promise 链？Promise 构造函数执行和 then 函数执行有什么区别？&quot;">​</a></h2><h3 id="promise-的特点" tabindex="-1">Promise 的特点 <a class="header-anchor" href="#promise-的特点" aria-label="Permalink to &quot;Promise 的特点&quot;">​</a></h3><ul><li><strong>状态管理</strong>： <ul><li>一个 Promise 对象代表一个异步操作的最终完成（或失败）及其结果值。</li><li>一个 Promise 只能处于以下三种状态之一： <ul><li>Pending（进行中）：初始状态，操作尚未完成。</li><li>Fulfilled（已成功）：操作成功完成。</li><li>Rejected（已失败）：操作失败。</li></ul></li></ul></li><li><strong>不可变性</strong>：</li></ul><p>一旦 Promise 状态从 Pending 变为 Fulfilled 或 Rejected，就不能再改变。</p><ul><li><strong>链式调用</strong>：</li></ul><p>Promise 支持链式调用，通过 .then() 方法可以将多个异步操作串联起来。</p><ul><li><strong>错误处理</strong>：</li></ul><p>错误会在链中传递，直到找到第一个 .catch() 进行处理。</p><h3 id="promise-的优缺点" tabindex="-1"><strong>Promise 的优缺点</strong> <a class="header-anchor" href="#promise-的优缺点" aria-label="Permalink to &quot;**Promise 的优缺点**&quot;">​</a></h3><ul><li><strong>优点</strong><ul><li><strong>避免回调地狱</strong>：通过链式调用，可以使代码更具可读性和可维护性。</li><li><strong>标准化</strong>：Promise 是 ES6 标准的一部分，具有广泛的浏览器支持和一致的 API。</li><li><strong>错误处理</strong>：提供了统一的错误处理机制，可以在链的任意位置捕获错误。</li><li><strong>并行操作</strong>：可以使用 Promise.all()、Promise.race() 等方法方便地处理并行的异步操作。</li></ul></li><li><strong>缺点</strong><ul><li><strong>学习曲线</strong>：对于初学者来说，理解 Promise 及其用法可能比较困难。</li><li><strong>调试困难</strong>：虽然比回调函数容易调试，但在链中发生的错误有时仍然难以定位。</li><li><strong>嵌套结构</strong>：在某些复杂场景下，尽管使用了 Promise，代码仍然可能变得嵌套且难以管理。</li></ul></li></ul><h3 id="promise-链" tabindex="-1">Promise 链 <a class="header-anchor" href="#promise-链" aria-label="Permalink to &quot;Promise 链&quot;">​</a></h3><p>Promise 链是通过连续的 .then() 方法调用将多个异步操作串联起来的结构。每个 .then() 方法返回一个新的 Promise，使得下一个 .then() 方法可以在前一个 Promise 完成后执行。</p><h3 id="promise-构造函数执行和-then-函数执行有什么区别" tabindex="-1">Promise 构造函数执行和 then 函数执行有什么区别 <a class="header-anchor" href="#promise-构造函数执行和-then-函数执行有什么区别" aria-label="Permalink to &quot;Promise 构造函数执行和 then 函数执行有什么区别&quot;">​</a></h3><p>构造函数中的代码同步执行，.then() 中的回调函数异步执行。</p><h2 id="async-及-await-的特点-它们的优点和缺点分别是什么-await-原理是什么" tabindex="-1">async 及 await 的特点，它们的优点和缺点分别是什么？await 原理是什么？ <a class="header-anchor" href="#async-及-await-的特点-它们的优点和缺点分别是什么-await-原理是什么" aria-label="Permalink to &quot;async 及 await 的特点，它们的优点和缺点分别是什么？await 原理是什么？&quot;">​</a></h2><ul><li><strong>async 和 await 的特点</strong>：提高异步代码的可读性和可维护性，使得异步代码看起来像同步代码。</li><li><strong>优点</strong>：代码可读性强、调试容易、错误处理简化、控制流自然。</li><li><strong>缺点</strong>：兼容性问题、需要注意执行顺序、错误处理的复杂性。</li><li><strong>await 的原理</strong>：等待一个 Promise 解决或拒绝，暂停 async 函数的执行，返回结果或抛出错误，不阻塞事件循环。</li></ul><h2 id="settimeout、setinterval、requestanimationframe-各有什么特点" tabindex="-1">setTimeout、setInterval、requestAnimationFrame 各有什么特点？ <a class="header-anchor" href="#settimeout、setinterval、requestanimationframe-各有什么特点" aria-label="Permalink to &quot;setTimeout、setInterval、requestAnimationFrame 各有什么特点？&quot;">​</a></h2><table tabindex="0"><thead><tr><th>特点</th><th><code>setTimeout</code></th><th><code>setInterval</code></th><th><code>requestAnimationFrame</code></th></tr></thead><tbody><tr><td><strong>用途</strong></td><td>单次延时执行</td><td>周期性重复执行</td><td>优化动画帧执行</td></tr><tr><td><strong>时间间隔</strong></td><td>不准确，可能会有延迟</td><td>不准确，可能会有延迟</td><td>准确，与屏幕刷新率一致</td></tr><tr><td><strong>返回值</strong></td><td>定时器 ID，用于取消定时</td><td>定时器 ID，用于取消定时</td><td>请求 ID，用于取消回调</td></tr><tr><td><strong>取消方式</strong></td><td><code>clearTimeout</code></td><td><code>clearInterval</code></td><td><code>cancelAnimationFrame</code></td></tr><tr><td><strong>资源管理</strong></td><td>无特殊优化</td><td>无特殊优化</td><td>当页面不可见时，浏览器自动暂停，节省资源</td></tr></tbody></table><h3 id="使用场景" tabindex="-1">使用场景 <a class="header-anchor" href="#使用场景" aria-label="Permalink to &quot;使用场景&quot;">​</a></h3><ul><li><strong><code>setTimeout</code></strong>：适用于需要延时执行一次性代码的场景，如延迟执行某个操作。</li><li><strong><code>setInterval</code></strong>：适用于需要周期性重复执行代码的场景，如轮询操作或周期性任务。</li><li><strong><code>requestAnimationFrame</code></strong>：适用于需要实现流畅动画的场景，如绘图和动画效果。</li></ul><h2 id="手写-promise" tabindex="-1">手写 Promise <a class="header-anchor" href="#手写-promise" aria-label="Permalink to &quot;手写 Promise&quot;">​</a></h2><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PENGDING</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;pending&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> REJECTED</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;rejected&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> RESOLVED</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;resolved&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> myPromise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> taht</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    taht.state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PENGDING</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    taht.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    taht.reslovedCallbacks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    taht.rejectedCallbacks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">instanceof</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> myPromise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(resolve,reject)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(taht.state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PENGDING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                taht.state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> RESOLVED</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                taht.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                taht.reslovedCallbacks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">cb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(taht.value))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(taht.state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PENGDING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                taht.state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> REJECTED</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                taht.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                taht.rejectedCallbacks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">cb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(taht.value))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        fn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(resolve, reject)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (e) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">myPromise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">onFulfilled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">onRejected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //先判断传入的方法</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> that</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    onFulfilled </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> onFulfilled </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;function&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> onFulfilled </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">v</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    onRejected </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> onRejected </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;function&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> onRejected </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(that.state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PENGDING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        that.reslovedCallbacks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(onFulfilled)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        that.rejectedCallbacks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(onRejected)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(that.state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> RESOLVED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        onFulfilled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(that.value)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(that.state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> REJECTED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        onRejected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(that.value)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><h2 id="call、apply-及-bind-函数内部实现是怎么样的" tabindex="-1">call、apply 及 bind 函数内部实现是怎么样的？ <a class="header-anchor" href="#call、apply-及-bind-函数内部实现是怎么样的" aria-label="Permalink to &quot;call、apply 及 bind 函数内部实现是怎么样的？&quot;">​</a></h2><h3 id="call" tabindex="-1">call <a class="header-anchor" href="#call" aria-label="Permalink to &quot;call&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">myCall</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 如果 context 为空，则默认设置为全局对象（在浏览器中为 window，在 Node.js 中为 global）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  context </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> context </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> globalThis;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 使用 Symbol 避免属性冲突</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fnSymbol</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Symbol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 将函数赋值给 context 的一个属性</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  context[fnSymbol] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 执行该函数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> context[fnSymbol](</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">args);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 删除该属性</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> context[fnSymbol];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 返回结果</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 示例</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> greet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">greeting</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">punctuation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">greeting</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}, ${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">punctuation</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> person</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Alice&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(greet.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">myCall</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(person, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;Hello, Alice!&quot;</span></span></code></pre></div><h3 id="apply" tabindex="-1">apply <a class="header-anchor" href="#apply" aria-label="Permalink to &quot;apply&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">myApply</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 如果 context 为空，则默认设置为全局对象（在浏览器中为 window，在 Node.js 中为 global）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  context </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> context </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> globalThis;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 使用 Symbol 避免属性冲突</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fnSymbol</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Symbol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 将函数赋值给 context 的一个属性</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  context[fnSymbol] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 执行该函数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> context[fnSymbol](</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">args);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 删除该属性</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> context[fnSymbol];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 返回结果</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 示例</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(greet.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">myApply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(person, [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hi&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;?&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;Hi, Alice?&quot;</span></span></code></pre></div><h3 id="bind" tabindex="-1">bind <a class="header-anchor" href="#bind" aria-label="Permalink to &quot;bind&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">myBind</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 保留 this（即原始函数）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 返回一个新的函数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">newArgs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 使用 call 方法调用原始函数，并传递合并后的参数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> self.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">myCall</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">args, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">newArgs);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 示例</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> greetAlice</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> greet.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">myBind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(person, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hey&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">greetAlice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;!!!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;Hey, Alice!!!&quot;</span></span></code></pre></div><h2 id="new-的原理是什么-通过-new-的方式创建对象和通过字面量创建有什么区别" tabindex="-1">new 的原理是什么？通过 new 的方式创建对象和通过字面量创建有什么区别？ <a class="header-anchor" href="#new-的原理是什么-通过-new-的方式创建对象和通过字面量创建有什么区别" aria-label="Permalink to &quot;new 的原理是什么？通过 new 的方式创建对象和通过字面量创建有什么区别？&quot;">​</a></h2><h3 id="new-的原理是什么" tabindex="-1">new 的原理是什么？ <a class="header-anchor" href="#new-的原理是什么" aria-label="Permalink to &quot;new 的原理是什么？&quot;">​</a></h3><ol><li><strong>创建一个空对象</strong>：创建一个空对象，并将其 <strong>proto</strong> 属性设置为构造函数的 prototype 属性。</li><li><strong>绑定 this</strong>：调用构造函数，并将 this 绑定到新创建的对象上。</li><li><strong>返回新对象</strong>：如果构造函数返回一个对象类型的值，则返回该值；否则，返回新创建的对象。</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> myNew</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 创建一个空对象，并将其原型设置为构造函数的原型</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 调用构造函数，并将 this 绑定到新创建的对象上</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> constructor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj, args);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 如果构造函数返回一个对象，则返回该对象；否则，返回新创建的对象</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;object&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 示例</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">age</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.age </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> age;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> person</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> myNew</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Person, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Alice&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(person); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Person { name: &#39;Alice&#39;, age: 30 }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(person </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">instanceof</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span></code></pre></div><h3 id="通过-new-的方式创建对象和通过字面量创建有什么区别" tabindex="-1">通过 new 的方式创建对象和通过字面量创建有什么区别？ <a class="header-anchor" href="#通过-new-的方式创建对象和通过字面量创建有什么区别" aria-label="Permalink to &quot;通过 new 的方式创建对象和通过字面量创建有什么区别？&quot;">​</a></h3><table tabindex="0"><thead><tr><th>特点</th><th>通过 <code>new</code> 创建对象</th><th>通过字面量创建对象</th></tr></thead><tbody><tr><td><strong>原型链</strong></td><td>对象的 <code>__proto__</code> 指向构造函数的 <code>prototype</code></td><td>对象的 <code>__proto__</code> 指向 <code>Object.prototype</code></td></tr><tr><td><strong>构造函数</strong></td><td>调用构造函数初始化对象</td><td>没有构造函数，直接定义属性和方法</td></tr><tr><td><strong><code>instanceof</code> 检查</strong></td><td>可用于验证对象是否是某个构造函数的实例</td><td>只能检查是否是 <code>Object</code> 的实例</td></tr><tr><td><strong>原型方法和属性</strong></td><td>可以访问构造函数原型上的方法和属性</td><td>只能访问 <code>Object.prototype</code> 上的方法和属性</td></tr><tr><td><strong>示例</strong></td><td><code>const obj = new Constructor();</code></td><td><code>const obj = { key: value };</code></td></tr></tbody></table><h2 id="instanceof-的原理是什么" tabindex="-1">instanceof 的原理是什么？ <a class="header-anchor" href="#instanceof-的原理是什么" aria-label="Permalink to &quot;instanceof 的原理是什么？&quot;">​</a></h2><p>instanceof 操作符用于检测构造函数的 prototype 属性是否出现在某个对象的原型链上。其原理可以通过以下几个步骤理解：</p><ul><li><strong>获取对象的原型</strong>：获取要检测的对象的原型链。</li><li><strong>沿原型链查找</strong>：沿着对象的原型链查找，判断构造函数的 prototype 属性是否存在于该原型链上。</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> myInstanceof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">left</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">right</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 获取 right 的 prototype</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> prototype</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> right</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 获取 left 的 __proto__</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> proto </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPrototypeOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(left);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 遍历原型链</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (proto </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 如果找到相同的 prototype，则返回 true</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (proto </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prototype) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 沿着原型链向上查找</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    proto </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPrototypeOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(proto);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 如果未找到，则返回 false</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 示例</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> person</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Alice&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">myInstanceof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(person, Person)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">myInstanceof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(person, Object)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">myInstanceof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(person, Array));  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// false</span></span></code></pre></div><h2 id="v8-下的垃圾回收机制是怎么样的" tabindex="-1">V8 下的垃圾回收机制是怎么样的？ <a class="header-anchor" href="#v8-下的垃圾回收机制是怎么样的" aria-label="Permalink to &quot;V8 下的垃圾回收机制是怎么样的？&quot;">​</a></h2><p>V8 引擎是 Google 开发的开源 JavaScript 引擎，用于执行 JavaScript 代码，包括在 Chrome 浏览器和 Node.js 中。V8 采用了多种垃圾回收机制来管理内存，以确保 JavaScript 程序高效运行。下面是 V8 垃圾回收机制的主要概念和工作原理：</p><h3 id="_1-内存空间划分" tabindex="-1">1. 内存空间划分 <a class="header-anchor" href="#_1-内存空间划分" aria-label="Permalink to &quot;1. 内存空间划分&quot;">​</a></h3><p>V8 将堆内存划分为不同的空间，以优化不同类型对象的管理和回收：</p><ul><li><p><strong>新生代（Young Generation）</strong>：存储短生命周期对象。分为两个空间：</p><ul><li><strong>From 空间</strong>：当前正在使用的空间。</li><li><strong>To 空间</strong>：用于垃圾回收时的临时空间。</li></ul></li><li><p><strong>老生代（Old Generation）</strong>：存储长生命周期对象，分为两个主要部分：</p><ul><li><strong>老生代空间</strong>：主要存储大对象和长生命周期对象。</li><li><strong>大对象空间（Large Object Space）</strong>：存储特别大的对象。</li></ul></li></ul><h3 id="_2-垃圾回收算法" tabindex="-1">2. 垃圾回收算法 <a class="header-anchor" href="#_2-垃圾回收算法" aria-label="Permalink to &quot;2. 垃圾回收算法&quot;">​</a></h3><p>V8 使用不同的垃圾回收算法来管理新生代和老生代的内存。</p><h4 id="新生代垃圾回收-scavenge" tabindex="-1">新生代垃圾回收（Scavenge） <a class="header-anchor" href="#新生代垃圾回收-scavenge" aria-label="Permalink to &quot;新生代垃圾回收（Scavenge）&quot;">​</a></h4><p>新生代使用的是 Scavenge 算法，具体为 Cheney 算法（标记-复制算法）：</p><ol><li><strong>标记</strong>：遍历 From 空间的活动对象并标记。</li><li><strong>复制</strong>：将活动对象复制到 To 空间，未被标记的对象被认为是垃圾并回收。</li><li><strong>交换</strong>：From 和 To 空间交换角色，To 空间变为新的 From 空间。</li></ol><p>这种算法非常高效，因为新生代对象大多数是短生命周期对象，因此垃圾回收非常频繁且速度很快。</p><h4 id="老生代垃圾回收-mark-sweep-and-mark-compact" tabindex="-1">老生代垃圾回收（Mark-Sweep and Mark-Compact） <a class="header-anchor" href="#老生代垃圾回收-mark-sweep-and-mark-compact" aria-label="Permalink to &quot;老生代垃圾回收（Mark-Sweep and Mark-Compact）&quot;">​</a></h4><p>老生代对象使用的是 Mark-Sweep 和 Mark-Compact 算法：</p><ol><li><p><strong>Mark-Sweep（标记-清除）</strong>：</p><ul><li><strong>标记阶段</strong>：从根对象开始，标记所有可达对象。</li><li><strong>清除阶段</strong>：回收所有未被标记的对象。</li></ul></li><li><p><strong>Mark-Compact（标记-整理）</strong>：</p><ul><li><strong>标记阶段</strong>：与 Mark-Sweep 相同，标记所有可达对象。</li><li><strong>整理阶段</strong>：将存活对象向堆的一端移动，以压缩内存空间，减少内存碎片。</li></ul></li></ol><h4 id="增量标记-incremental-marking" tabindex="-1">增量标记（Incremental Marking） <a class="header-anchor" href="#增量标记-incremental-marking" aria-label="Permalink to &quot;增量标记（Incremental Marking）&quot;">​</a></h4><p>为了减少垃圾回收的暂停时间（Stop-the-world），V8 使用增量标记策略，将标记工作分成多个小步，在程序执行过程中逐步完成，减少长时间的暂停。</p><h3 id="_3-并行和并发垃圾回收" tabindex="-1">3. 并行和并发垃圾回收 <a class="header-anchor" href="#_3-并行和并发垃圾回收" aria-label="Permalink to &quot;3. 并行和并发垃圾回收&quot;">​</a></h3><p>V8 还利用并行和并发技术来优化垃圾回收过程：</p><ul><li><strong>并行垃圾回收</strong>：垃圾回收线程在多个 CPU 核心上同时工作，加速垃圾回收过程。</li><li><strong>并发垃圾回收</strong>：垃圾回收工作与程序执行同时进行，进一步减少暂停时间。</li></ul><h3 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h3><p>V8 引擎的垃圾回收机制通过多种策略来高效管理内存：</p><ol><li><p><strong>内存空间划分</strong>：</p><ul><li>新生代：存储短生命周期对象，使用 Scavenge 算法。</li><li>老生代：存储长生命周期对象，使用 Mark-Sweep 和 Mark-Compact 算法。</li></ul></li><li><p><strong>增量标记</strong>：</p><ul><li>将标记工作分成多个小步，减少垃圾回收的暂停时间。</li></ul></li><li><p><strong>并行和并发垃圾回收</strong>：</p><ul><li>通过多线程技术加速垃圾回收，并减少程序暂停时间。</li></ul></li></ol><p>这些机制共同作用，确保了 V8 引擎在处理 JavaScript 代码时的高效内存管理和性能优化。</p><h2 id="有几种方式可以实现存储功能-分别有什么优缺点-什么是-service-worker" tabindex="-1">有几种方式可以实现存储功能，分别有什么优缺点？什么是 Service Worker？ <a class="header-anchor" href="#有几种方式可以实现存储功能-分别有什么优缺点-什么是-service-worker" aria-label="Permalink to &quot;有几种方式可以实现存储功能，分别有什么优缺点？什么是 Service Worker？&quot;">​</a></h2><h3 id="存储功能的几种方式及其优缺点" tabindex="-1">存储功能的几种方式及其优缺点 <a class="header-anchor" href="#存储功能的几种方式及其优缺点" aria-label="Permalink to &quot;存储功能的几种方式及其优缺点&quot;">​</a></h3><table tabindex="0"><thead><tr><th>存储方式</th><th>优点</th><th>缺点</th></tr></thead><tbody><tr><td>Cookies</td><td>- 兼容性好，所有浏览器都支持</td><td>- 存储容量小（通常只有 4KB）</td></tr><tr><td></td><td>- 可以设置过期时间和路径，适用于跨页面的数据存储</td><td>- 安全性较差，容易被劫持和篡改</td></tr><tr><td></td><td>- 可以与服务器通信，在每个请求中自动携带</td><td>- 在每个 HTTP 请求中都会携带，增加了请求的体积</td></tr><tr><td>LocalStorage</td><td>- 存储容量大（通常 5MB 或更多）</td><td>- 仅在同一域名下可访问，无法跨域共享</td></tr><tr><td></td><td>- 存储的数据持久化，除非手动删除，否则不会过期</td><td>- 只能存储字符串类型，需要手动转换其他数据类型</td></tr><tr><td></td><td>- 适用于存储不需要与服务器频繁交互的数据</td><td>- 同源策略限制，不能在不同的子域之间共享</td></tr><tr><td>SessionStorage</td><td>- 存储容量较大（通常 5MB 或更多）</td><td>- 仅在同一标签页或窗口中可访问，不能跨页面共享</td></tr><tr><td></td><td>- 数据仅在当前会话中有效，关闭浏览器或标签页后自动删除</td><td>- 只能存储字符串类型，需要手动转换其他数据类型</td></tr><tr><td>IndexedDB</td><td>- 存储容量大（通常数百 MB 到几 GB）</td><td>- API 复杂，使用起来相对繁琐</td></tr><tr><td></td><td>- 支持事务、索引、查询等复杂操作，适用于复杂数据的存储和查询</td><td>- 需要处理异步操作，增加了代码复杂性</td></tr><tr><td></td><td>- 可以存储多种类型的数据，包括对象、文件等</td><td>- 兼容性问题，一些旧版本的浏览器可能不支持</td></tr><tr><td>WebSQL（已废弃）</td><td>- 类似于 SQL 的查询语言，易于使用</td><td>- 已被废弃，不推荐使用</td></tr><tr><td></td><td>- 支持事务、查询等操作</td><td>- 兼容性差，现代浏览器已不再支持</td></tr><tr><td>File System Access API</td><td>- 允许 Web 应用直接读写用户本地文件系统</td><td>- 兼容性问题，目前只有部分浏览器支持</td></tr><tr><td></td><td>- 适用于需要处理大量文件数据的应用，如图像处理、视频编辑等</td><td>- 安全性和隐私问题，需要用户明确授权</td></tr></tbody></table><h3 id="service-worker" tabindex="-1">Service Worker <a class="header-anchor" href="#service-worker" aria-label="Permalink to &quot;Service Worker&quot;">​</a></h3><p>Service Worker 是一种运行在浏览器后台的脚本，允许实现离线缓存、消息推送、后台同步等功能。 <strong>优点</strong>：</p><ul><li>提供离线功能，增强用户体验。</li><li>支持后台推送和同步，提高应用的互动性和可靠性。</li><li>减少服务器负载，通过缓存静态资源降低带宽消耗。</li></ul><p><strong>缺点</strong>：</p><ul><li>需要 HTTPS 支持，因为 Service Worker 涉及网络请求的拦截和缓存，必须在安全环境下使用。</li><li>需要处理缓存的版本更新和管理，增加了开发复杂度。</li></ul><h2 id="强缓存和协商缓存" tabindex="-1">强缓存和协商缓存 <a class="header-anchor" href="#强缓存和协商缓存" aria-label="Permalink to &quot;强缓存和协商缓存&quot;">​</a></h2><h3 id="强缓存-strong-cache" tabindex="-1">强缓存（Strong Cache） <a class="header-anchor" href="#强缓存-strong-cache" aria-label="Permalink to &quot;强缓存（Strong Cache）&quot;">​</a></h3><p><strong>定义</strong>： 强缓存是指浏览器在发送请求前，先根据缓存规则判断本地缓存是否过期，如果未过期，则直接使用本地缓存，而不向服务器发送请求。</p><p><strong>实现方式</strong>： 通过 <code>Expires</code> 和 <code>Cache-Control</code> 两个 HTTP 头实现。</p><ol><li><p><strong>Expires</strong>：</p><ul><li>用于指定资源的过期时间，是一个绝对时间点（GMT 格式）。</li><li>例如：<code>Expires: Wed, 21 Oct 2023 07:28:00 GMT</code></li><li>缺点：由于使用的是绝对时间，容易受到客户端和服务器时间不一致的影响。</li></ul></li><li><p><strong>Cache-Control</strong>：</p><ul><li>用于指定相对时间，通过 <code>max-age</code> 指定资源的有效期（单位为秒）。</li><li>例如：<code>Cache-Control: max-age=3600</code></li><li>比 <code>Expires</code> 更加精确和灵活，还可以指定其他缓存策略，如 <code>no-cache</code>、<code>no-store</code> 等。</li></ul></li></ol><p><strong>优点</strong>：</p><ul><li>提高性能，减少不必要的网络请求，降低服务器压力。</li><li>提高用户体验，减少资源加载时间。</li></ul><p><strong>缺点</strong>：</p><ul><li>资源更新不及时时，可能会导致用户看到旧的内容。</li></ul><h3 id="协商缓存-negotiation-cache" tabindex="-1">协商缓存（Negotiation Cache） <a class="header-anchor" href="#协商缓存-negotiation-cache" aria-label="Permalink to &quot;协商缓存（Negotiation Cache）&quot;">​</a></h3><p><strong>定义</strong>： 协商缓存是指浏览器在发送请求前，会向服务器验证本地缓存的有效性。如果服务器确认缓存有效，则返回 304 状态码，浏览器继续使用本地缓存；如果缓存失效，服务器会返回最新的资源。</p><p><strong>实现方式</strong>： 通过 <code>Last-Modified</code> 和 <code>ETag</code> 两个 HTTP 头实现。</p><ol><li><p><strong>Last-Modified</strong>：</p><ul><li>记录资源的最后修改时间。</li><li>浏览器在请求时，会发送一个 <code>If-Modified-Since</code> 头，服务器根据资源的最后修改时间来判断是否更新。</li><li>例如：<code>Last-Modified: Wed, 21 Oct 2023 07:28:00 GMT</code></li></ul></li><li><p><strong>ETag</strong>：</p><ul><li>资源的唯一标识符（通常是资源的内容哈希值）。</li><li>浏览器在请求时，会发送一个 <code>If-None-Match</code> 头，服务器根据 ETag 来判断资源是否更新。</li><li>例如：<code>ETag: &quot;5d8c72a2d98e0&quot;</code></li></ul></li></ol><p><strong>优点</strong>：</p><ul><li>能够确保用户看到最新的内容，保证资源的时效性。</li><li>在资源没有变化时，减少了数据传输量（仅返回 304 状态码和头信息）。</li></ul><p><strong>缺点</strong>：</p><ul><li>增加了服务器的请求次数，相比强缓存略微降低了性能。</li></ul><h3 id="强缓存与协商缓存的比较" tabindex="-1">强缓存与协商缓存的比较 <a class="header-anchor" href="#强缓存与协商缓存的比较" aria-label="Permalink to &quot;强缓存与协商缓存的比较&quot;">​</a></h3><table tabindex="0"><thead><tr><th>对比项</th><th>强缓存</th><th>协商缓存</th></tr></thead><tbody><tr><td>实现方式</td><td><code>Expires</code> 和 <code>Cache-Control</code></td><td><code>Last-Modified</code> 和 <code>ETag</code></td></tr><tr><td>请求次数</td><td>不发送请求</td><td>发送请求进行验证</td></tr><tr><td>性能</td><td>更高（不需要请求服务器）</td><td>略低（需要请求服务器进行验证）</td></tr><tr><td>资源更新</td><td>依赖于设置的过期时间</td><td>确保资源最新，通过服务器验证</td></tr><tr><td>使用场景</td><td>资源更新频率低、对时效性要求低</td><td>资源更新频率高、对时效性要求高</td></tr></tbody></table><h3 id="综合应用" tabindex="-1">综合应用 <a class="header-anchor" href="#综合应用" aria-label="Permalink to &quot;综合应用&quot;">​</a></h3><p>在实际应用中，通常会结合使用强缓存和协商缓存，以便在保证资源更新及时的前提下，提高资源加载性能。例如，先设置较长的 <code>Cache-Control</code> 时间，再结合 <code>ETag</code> 或 <code>Last-Modified</code> 进行验证。</p><h2 id="网址到页面渲染" tabindex="-1">网址到页面渲染 <a class="header-anchor" href="#网址到页面渲染" aria-label="Permalink to &quot;网址到页面渲染&quot;">​</a></h2><p>从输入网址到页面渲染，浏览器会经历一系列复杂的过程，主要包括以下步骤：</p><ol><li><strong>DNS 解析</strong></li><li><strong>TCP 连接</strong></li><li><strong>发送 HTTP 请求</strong></li><li><strong>服务器处理请求</strong></li><li><strong>服务器响应</strong></li><li><strong>浏览器接收响应</strong></li><li><strong>解析 HTML</strong></li><li><strong>解析 CSS</strong></li><li><strong>解析 JavaScript</strong></li><li><strong>构建 DOM 树和 CSSOM 树</strong></li><li><strong>生成渲染树</strong></li><li><strong>布局（Layout）</strong></li><li><strong>绘制（Painting）</strong></li><li><strong>合成与显示（Compositing）</strong></li></ol><h3 id="_1-dns-解析" tabindex="-1">1. DNS 解析 <a class="header-anchor" href="#_1-dns-解析" aria-label="Permalink to &quot;1. DNS 解析&quot;">​</a></h3><p>浏览器首先需要将输入的 URL 解析成服务器的 IP 地址。这个过程包括以下几步：</p><ul><li>浏览器缓存查询</li><li>操作系统缓存查询</li><li>路由器缓存查询</li><li>ISP（互联网服务提供商）DNS 服务器查询</li><li>根 DNS 服务器、顶级域名服务器和权威 DNS 服务器逐级查询</li></ul><h3 id="_2-tcp-连接" tabindex="-1">2. TCP 连接 <a class="header-anchor" href="#_2-tcp-连接" aria-label="Permalink to &quot;2. TCP 连接&quot;">​</a></h3><p>DNS 解析完成后，浏览器会与服务器建立 TCP 连接。这个过程包括三次握手：</p><ul><li>客户端发送 SYN 包</li><li>服务器返回 SYN-ACK 包</li><li>客户端发送 ACK 包，连接建立</li></ul><h3 id="_3-发送-http-请求" tabindex="-1">3. 发送 HTTP 请求 <a class="header-anchor" href="#_3-发送-http-请求" aria-label="Permalink to &quot;3. 发送 HTTP 请求&quot;">​</a></h3><p>TCP 连接建立后，浏览器会发送 HTTP 请求到服务器。请求中包括请求行、请求头和请求体，包含了请求方法、URL、浏览器和客户端信息等。</p><h3 id="_4-服务器处理请求" tabindex="-1">4. 服务器处理请求 <a class="header-anchor" href="#_4-服务器处理请求" aria-label="Permalink to &quot;4. 服务器处理请求&quot;">​</a></h3><p>服务器接收到请求后，会处理请求并生成响应内容。这可能涉及到：</p><ul><li>查询数据库</li><li>调用后端服务</li><li>读取文件等</li></ul><h3 id="_5-服务器响应" tabindex="-1">5. 服务器响应 <a class="header-anchor" href="#_5-服务器响应" aria-label="Permalink to &quot;5. 服务器响应&quot;">​</a></h3><p>服务器处理完成后，会将响应数据通过 HTTP 响应发送回客户端。响应包括响应行、响应头和响应体，包含状态码、响应数据等。</p><h3 id="_6-浏览器接收响应" tabindex="-1">6. 浏览器接收响应 <a class="header-anchor" href="#_6-浏览器接收响应" aria-label="Permalink to &quot;6. 浏览器接收响应&quot;">​</a></h3><p>浏览器接收到响应数据后，会检查响应状态码。如果状态码是 200，表示请求成功，浏览器开始处理响应数据。</p><h3 id="_7-解析-html" tabindex="-1">7. 解析 HTML <a class="header-anchor" href="#_7-解析-html" aria-label="Permalink to &quot;7. 解析 HTML&quot;">​</a></h3><p>浏览器开始解析 HTML 文档，构建 DOM 树。在解析过程中，如果遇到外部资源（如 CSS、JavaScript、图片等），会发起新的请求下载这些资源。</p><h3 id="_8-解析-css" tabindex="-1">8. 解析 CSS <a class="header-anchor" href="#_8-解析-css" aria-label="Permalink to &quot;8. 解析 CSS&quot;">​</a></h3><p>浏览器解析所有的 CSS 文件，构建 CSSOM 树。CSSOM 树包含了所有样式规则和节点。</p><h3 id="_9-解析-javascript" tabindex="-1">9. 解析 JavaScript <a class="header-anchor" href="#_9-解析-javascript" aria-label="Permalink to &quot;9. 解析 JavaScript&quot;">​</a></h3><p>浏览器解析并执行 JavaScript 代码。在执行过程中，JavaScript 可能会修改 DOM 树和 CSSOM 树。</p><h3 id="_10-构建-dom-树和-cssom-树" tabindex="-1">10. 构建 DOM 树和 CSSOM 树 <a class="header-anchor" href="#_10-构建-dom-树和-cssom-树" aria-label="Permalink to &quot;10. 构建 DOM 树和 CSSOM 树&quot;">​</a></h3><p>浏览器将解析后的 HTML 生成 DOM 树，将解析后的 CSS 生成 CSSOM 树。这两个树结构是页面的基础。</p><h3 id="_11-生成渲染树" tabindex="-1">11. 生成渲染树 <a class="header-anchor" href="#_11-生成渲染树" aria-label="Permalink to &quot;11. 生成渲染树&quot;">​</a></h3><p>浏览器结合 DOM 树和 CSSOM 树，生成渲染树。渲染树包含了所有需要显示的元素及其样式信息。</p><h3 id="_12-布局-layout" tabindex="-1">12. 布局（Layout） <a class="header-anchor" href="#_12-布局-layout" aria-label="Permalink to &quot;12. 布局（Layout）&quot;">​</a></h3><p>浏览器根据渲染树进行布局，计算每个元素的几何信息（位置和大小）。这个过程从根节点开始，递归地计算所有渲染对象的位置和大小。</p><h3 id="_13-绘制-painting" tabindex="-1">13. 绘制（Painting） <a class="header-anchor" href="#_13-绘制-painting" aria-label="Permalink to &quot;13. 绘制（Painting）&quot;">​</a></h3><p>布局完成后，浏览器将渲染树中的每个节点绘制到屏幕上。这个过程包括绘制背景颜色和图像、绘制边框、绘制文本、绘制阴影等效果。</p><h3 id="_14-合成与显示-compositing" tabindex="-1">14. 合成与显示（Compositing） <a class="header-anchor" href="#_14-合成与显示-compositing" aria-label="Permalink to &quot;14. 合成与显示（Compositing）&quot;">​</a></h3><p>在绘制阶段，浏览器会将不同的层合成到一起，生成最终的页面图像。浏览器使用合成器线程将各个层合成，并处理滚动、变换等效果，最终显示到屏幕上。</p><h3 id="流程图示" tabindex="-1">流程图示 <a class="header-anchor" href="#流程图示" aria-label="Permalink to &quot;流程图示&quot;">​</a></h3><div class="language-plaintext vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>1. 输入 URL</span></span>
<span class="line"><span>2. DNS 解析 -&gt; 获取 IP 地址</span></span>
<span class="line"><span>3. TCP 连接 -&gt; 三次握手</span></span>
<span class="line"><span>4. 发送 HTTP 请求</span></span>
<span class="line"><span>5. 服务器处理请求</span></span>
<span class="line"><span>6. 服务器响应</span></span>
<span class="line"><span>7. 浏览器接收响应</span></span>
<span class="line"><span>8. 解析 HTML -&gt; 构建 DOM 树</span></span>
<span class="line"><span>9. 解析 CSS -&gt; 构建 CSSOM 树</span></span>
<span class="line"><span>10. 解析 JavaScript -&gt; 执行脚本</span></span>
<span class="line"><span>11. 生成渲染树</span></span>
<span class="line"><span>12. 布局 -&gt; 计算几何信息</span></span>
<span class="line"><span>13. 绘制 -&gt; 绘制各层</span></span>
<span class="line"><span>14. 合成与显示 -&gt; 显示到屏幕</span></span></code></pre></div><h3 id="关键点总结" tabindex="-1">关键点总结 <a class="header-anchor" href="#关键点总结" aria-label="Permalink to &quot;关键点总结&quot;">​</a></h3><ul><li><strong>DNS 解析</strong>：将域名解析为 IP 地址。</li><li><strong>TCP 连接</strong>：通过三次握手建立连接。</li><li><strong>HTTP 请求和响应</strong>：客户端发送请求，服务器返回响应。</li><li><strong>解析与构建</strong>：解析 HTML、CSS、JavaScript，构建 DOM 树和 CSSOM 树。</li><li><strong>渲染与布局</strong>：生成渲染树，计算布局，绘制和合成各层，最终显示到屏幕。</li></ul><h2 id="如何最快渲染页面" tabindex="-1">如何最快渲染页面 <a class="header-anchor" href="#如何最快渲染页面" aria-label="Permalink to &quot;如何最快渲染页面&quot;">​</a></h2><p>在不考虑缓存和优化网络协议的前提下，要最快地渲染页面，我们需要优化关键渲染路径（Critical Rendering Path）。关键渲染路径是从浏览器接收到 HTML 文档到页面呈现在屏幕上的过程。优化关键渲染路径的主要目标是减少首次内容绘制（First Contentful Paint, FCP）和首次有意义绘制（First Meaningful Paint, FMP）的时间。以下是一些具体的优化措施：</p><h3 id="_1-最小化关键资源数量和大小" tabindex="-1">1. 最小化关键资源数量和大小 <a class="header-anchor" href="#_1-最小化关键资源数量和大小" aria-label="Permalink to &quot;1. 最小化关键资源数量和大小&quot;">​</a></h3><ul><li><p><strong>减少关键资源数量</strong>：</p><ul><li><strong>内联关键 CSS</strong>：将关键 CSS 直接内联在 HTML 中，避免额外的 HTTP 请求。</li><li><strong>内联关键 JavaScript</strong>：将关键的 JavaScript 代码内联在 HTML 中，避免额外的 HTTP 请求。</li><li><strong>精简 HTML</strong>：去除不必要的 HTML 标签和注释。</li></ul></li><li><p><strong>减少关键资源大小</strong>：</p><ul><li><strong>压缩 CSS 和 JavaScript</strong>：使用工具如 UglifyJS、Terser 压缩 JavaScript，使用 CSSNano 压缩 CSS。</li><li><strong>移除未使用的 CSS</strong>：使用工具如 PurifyCSS 或 UnCSS 移除未使用的 CSS 规则。</li><li><strong>减少初始内容量</strong>：仅加载页面初始显示所需的最小内容。</li></ul></li></ul><h3 id="_2-优化-css-加载" tabindex="-1">2. 优化 CSS 加载 <a class="header-anchor" href="#_2-优化-css-加载" aria-label="Permalink to &quot;2. 优化 CSS 加载&quot;">​</a></h3><ul><li><strong>避免阻塞渲染的 CSS</strong>： <ul><li><strong>异步加载非关键 CSS</strong>：使用 <code>media</code> 属性（如 <code>media=&quot;print&quot;</code>) 使非关键 CSS 异步加载，或者使用 JavaScript 动态加载非关键 CSS。</li><li><strong>分离关键 CSS 和非关键 CSS</strong>：将关键 CSS 内联在 HTML 中，非关键 CSS 延迟加载。</li></ul></li></ul><h3 id="_3-优化-javascript-加载" tabindex="-1">3. 优化 JavaScript 加载 <a class="header-anchor" href="#_3-优化-javascript-加载" aria-label="Permalink to &quot;3. 优化 JavaScript 加载&quot;">​</a></h3><ul><li><strong>异步加载和延迟执行 JavaScript</strong>： <ul><li><strong>使用 <code>async</code> 和 <code>defer</code></strong>：对非关键 JavaScript 文件使用 <code>async</code> 或 <code>defer</code> 属性，使其异步加载，减少阻塞。</li><li><strong>将 JavaScript 放在页面底部</strong>：将 JavaScript 脚本标签放在页面底部，确保在加载和解析 HTML 之前不阻塞渲染。</li></ul></li></ul><h3 id="_4-优化字体加载" tabindex="-1">4. 优化字体加载 <a class="header-anchor" href="#_4-优化字体加载" aria-label="Permalink to &quot;4. 优化字体加载&quot;">​</a></h3><ul><li><strong>减少字体加载的影响</strong>： <ul><li><strong>使用字体显示策略</strong>：使用 <code>font-display</code> CSS 属性优化字体加载行为，如 <code>font-display: swap</code>。</li><li><strong>提前加载字体</strong>：使用 <code>&lt;link rel=&quot;preload&quot; href=&quot;your-font-url&quot; as=&quot;font&quot; type=&quot;font/woff2&quot; crossorigin=&quot;anonymous&quot;&gt;</code> 提前加载关键字体。</li></ul></li></ul><h3 id="_5-优化图片加载" tabindex="-1">5. 优化图片加载 <a class="header-anchor" href="#_5-优化图片加载" aria-label="Permalink to &quot;5. 优化图片加载&quot;">​</a></h3><ul><li><strong>延迟加载图片</strong>： <ul><li><strong>使用懒加载</strong>：通过懒加载技术，延迟加载页面非关键图片，使用 IntersectionObserver API 实现懒加载。</li><li><strong>使用合适的图片格式</strong>：使用现代图片格式（如 WebP）减少图片文件大小。</li></ul></li></ul><h3 id="_6-优化渲染顺序" tabindex="-1">6. 优化渲染顺序 <a class="header-anchor" href="#_6-优化渲染顺序" aria-label="Permalink to &quot;6. 优化渲染顺序&quot;">​</a></h3><ul><li><strong>避免长时间运行的 JavaScript</strong>： <ul><li><strong>分解长任务</strong>：使用 <code>requestAnimationFrame</code> 或 <code>requestIdleCallback</code> 分解长时间运行的 JavaScript 任务，避免阻塞主线程。</li><li><strong>减少 DOM 操作</strong>：尽量减少 DOM 操作的次数和复杂度。</li></ul></li></ul><h3 id="_7-减少重排和重绘" tabindex="-1">7. 减少重排和重绘 <a class="header-anchor" href="#_7-减少重排和重绘" aria-label="Permalink to &quot;7. 减少重排和重绘&quot;">​</a></h3><ul><li><strong>优化样式和布局计算</strong>： <ul><li><strong>避免频繁修改 DOM</strong>：批量更新 DOM，减少重排和重绘。</li><li><strong>使用 CSS 动画</strong>：相比 JavaScript 动画，CSS 动画性能更好，因为它们可以在合成器线程中执行，不会触发重排和重绘。</li></ul></li></ul><h3 id="示例-优化后的-html-页面结构" tabindex="-1">示例：优化后的 HTML 页面结构 <a class="header-anchor" href="#示例-优化后的-html-页面结构" aria-label="Permalink to &quot;示例：优化后的 HTML 页面结构&quot;">​</a></h3><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;!</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">DOCTYPE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;en&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> charset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;viewport&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Optimized Page&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!-- Inline critical CSS --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      font-family</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Arial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sans-serif</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      margin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      padding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    .header</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      background-color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">#f8f9fa</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      padding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!-- Preload key resources --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;preload&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;styles.css&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;style&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;preload&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;script.js&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;script&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;header&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Optimized Page&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;This is an optimized web page.&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!-- Load non-critical CSS asynchronously --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stylesheet&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;styles.css&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> media</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;print&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">media</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;all&#39;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!-- Load JavaScript asynchronously --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;script.js&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h3 id="关键渲染路径优化总结" tabindex="-1">关键渲染路径优化总结 <a class="header-anchor" href="#关键渲染路径优化总结" aria-label="Permalink to &quot;关键渲染路径优化总结&quot;">​</a></h3><ul><li><strong>减少关键资源数量和大小</strong>：内联关键 CSS 和 JavaScript，压缩资源。</li><li><strong>优化资源加载顺序</strong>：异步加载非关键 CSS 和 JavaScript，提前加载字体。</li><li><strong>优化图片加载</strong>：使用懒加载和现代图片格式。</li><li><strong>减少重排和重绘</strong>：避免频繁修改 DOM，使用 CSS 动画。</li><li><strong>优化渲染顺序</strong>：分解长时间运行的任务，减少阻塞。</li></ul><p>通过这些优化措施，可以显著减少首次内容绘制和首次有意义绘制的时间，加快页面的渲染速度，提升用户体验。</p><h2 id="前端安全" tabindex="-1">前端安全 <a class="header-anchor" href="#前端安全" aria-label="Permalink to &quot;前端安全&quot;">​</a></h2><h3 id="xss-cross-site-scripting" tabindex="-1">XSS (Cross-Site Scripting) <a class="header-anchor" href="#xss-cross-site-scripting" aria-label="Permalink to &quot;XSS (Cross-Site Scripting)&quot;">​</a></h3><h4 id="描述" tabindex="-1">描述 <a class="header-anchor" href="#描述" aria-label="Permalink to &quot;描述&quot;">​</a></h4><ul><li><strong>类型</strong>：注入攻击</li><li><strong>目标</strong>：通过向网页注入恶意脚本，使之在用户的浏览器中执行。</li><li><strong>方式</strong>：攻击者在输入字段、URL、或其他数据源注入恶意脚本代码。</li></ul><h4 id="种类" tabindex="-1">种类 <a class="header-anchor" href="#种类" aria-label="Permalink to &quot;种类&quot;">​</a></h4><ul><li><strong>反射型 XSS</strong>：恶意脚本作为即时响应的一部分被注入并执行。</li><li><strong>存储型 XSS</strong>：恶意脚本被持久存储在服务器上（如数据库），当受害者访问相关页面时执行。</li><li><strong>DOM 型 XSS</strong>：恶意脚本直接操控浏览器 DOM，且不通过服务器。</li></ul><h4 id="危害" tabindex="-1">危害 <a class="header-anchor" href="#危害" aria-label="Permalink to &quot;危害&quot;">​</a></h4><ul><li>窃取用户信息，如 cookies、会话令牌。</li><li>劫持用户会话。</li><li>在用户的浏览器中执行任意操作。</li></ul><h4 id="防御措施" tabindex="-1">防御措施 <a class="header-anchor" href="#防御措施" aria-label="Permalink to &quot;防御措施&quot;">​</a></h4><ul><li><strong>输入验证</strong>：对所有用户输入进行验证和净化。</li><li><strong>输出编码</strong>：对所有输出数据进行编码，防止其被解释为脚本。</li><li><strong>内容安全策略 (CSP)</strong>：限制允许加载和执行的内容类型和来源。</li><li><strong>HTTP-only Cookies</strong>：防止客户端脚本访问 cookies。</li></ul><h3 id="csrf-cross-site-request-forgery" tabindex="-1">CSRF (Cross-Site Request Forgery) <a class="header-anchor" href="#csrf-cross-site-request-forgery" aria-label="Permalink to &quot;CSRF (Cross-Site Request Forgery)&quot;">​</a></h3><h4 id="描述-1" tabindex="-1">描述 <a class="header-anchor" href="#描述-1" aria-label="Permalink to &quot;描述&quot;">​</a></h4><ul><li><strong>类型</strong>：伪造请求</li><li><strong>目标</strong>：利用受害者已认证的会话，在不知情的情况下向受信任的网站发送伪造请求。</li><li><strong>方式</strong>：攻击者诱使用户点击恶意链接、提交表单或加载图像，向受信任的站点发送请求。</li></ul><h4 id="危害-1" tabindex="-1">危害 <a class="header-anchor" href="#危害-1" aria-label="Permalink to &quot;危害&quot;">​</a></h4><ul><li>执行用户的敏感操作，如转账、修改账户信息。</li><li>伪造用户操作。</li></ul><h4 id="防御措施-1" tabindex="-1">防御措施 <a class="header-anchor" href="#防御措施-1" aria-label="Permalink to &quot;防御措施&quot;">​</a></h4><ul><li><strong>CSRF 令牌</strong>：在每个请求中包含唯一的、不可预测的令牌，验证其有效性。</li><li><strong>双重提交 Cookie</strong>：在请求和 Cookie 中都包含令牌，并进行验证。</li><li><strong>SameSite Cookie</strong>：通过设置 Cookie 的 SameSite 属性，限制跨站请求。</li><li><strong>验证 Referer 头</strong>：检查请求的来源头。</li></ul><h3 id="点击劫持-clickjacking" tabindex="-1">点击劫持 (Clickjacking) <a class="header-anchor" href="#点击劫持-clickjacking" aria-label="Permalink to &quot;点击劫持 (Clickjacking)&quot;">​</a></h3><h4 id="描述-2" tabindex="-1">描述 <a class="header-anchor" href="#描述-2" aria-label="Permalink to &quot;描述&quot;">​</a></h4><ul><li><strong>类型</strong>：UI 欺骗攻击</li><li><strong>目标</strong>：通过隐藏的 iframe 覆盖在合法页面之上，诱使用户点击伪装的内容。</li><li><strong>方式</strong>：使用透明或不可见的 iframe，覆盖在受害者页面的按钮或链接上。</li></ul><h4 id="危害-2" tabindex="-1">危害 <a class="header-anchor" href="#危害-2" aria-label="Permalink to &quot;危害&quot;">​</a></h4><ul><li>执行用户未预期的操作。</li><li>劫持用户的点击，导致信息泄露或其他恶意操作。</li></ul><h4 id="防御措施-2" tabindex="-1">防御措施 <a class="header-anchor" href="#防御措施-2" aria-label="Permalink to &quot;防御措施&quot;">​</a></h4><ul><li><strong>X-Frame-Options 头</strong>：设置页面不能被嵌入到 iframe 中，如 <code>DENY</code> 或 <code>SAMEORIGIN</code>。</li><li><strong>Content Security Policy (CSP)</strong>：使用 <code>frame-ancestors</code> 指令，指定允许嵌入的源。</li><li><strong>防止点击劫持的框架破坏脚本</strong>：在页面加载时检测自身是否在顶层窗口中。</li></ul><h3 id="对比" tabindex="-1">对比 <a class="header-anchor" href="#对比" aria-label="Permalink to &quot;对比&quot;">​</a></h3><table tabindex="0"><thead><tr><th>特性</th><th>XSS</th><th>CSRF</th><th>点击劫持</th></tr></thead><tbody><tr><td><strong>类型</strong></td><td>注入攻击</td><td>伪造请求</td><td>UI 欺骗攻击</td></tr><tr><td><strong>目标</strong></td><td>在用户浏览器中执行恶意脚本</td><td>利用用户身份发送伪造请求</td><td>诱使用户执行未预期操作</td></tr><tr><td><strong>方式</strong></td><td>注入和执行脚本</td><td>诱使用户发送请求</td><td>使用隐藏的 iframe 覆盖页面</td></tr><tr><td><strong>主要危害</strong></td><td>窃取信息、劫持会话、执行任意操作</td><td>执行敏感操作、伪造操作</td><td>执行未预期操作、信息泄露</td></tr><tr><td><strong>防御措施</strong></td><td>输入验证、输出编码、CSP、HTTP-only Cookies</td><td>CSRF 令牌、双重提交 Cookie、SameSite Cookie、Referer 验证</td><td>X-Frame-Options、CSP (frame-ancestors)、框架破坏脚本</td></tr></tbody></table><p>通过正确理解和实现这些防御措施，可以有效地保护应用程序免受 XSS、CSRF 和点击劫持的攻击。</p><h2 id="节流和防抖" tabindex="-1">节流和防抖 <a class="header-anchor" href="#节流和防抖" aria-label="Permalink to &quot;节流和防抖&quot;">​</a></h2><p><strong>节流</strong>（Throttling）和<strong>防抖</strong>（Debouncing）是两种常用的前端性能优化技术，用于控制函数的调用频率和避免过度触发事件。它们各有不同的用途和实现方式。</p><h3 id="节流-throttling" tabindex="-1">节流（Throttling） <a class="header-anchor" href="#节流-throttling" aria-label="Permalink to &quot;节流（Throttling）&quot;">​</a></h3><h4 id="描述-3" tabindex="-1">描述 <a class="header-anchor" href="#描述-3" aria-label="Permalink to &quot;描述&quot;">​</a></h4><p>节流是将函数调用限制在一定时间间隔内。无论事件触发的频率多高，函数在每个时间间隔内只会执行一次。</p><h4 id="适用场景" tabindex="-1">适用场景 <a class="header-anchor" href="#适用场景" aria-label="Permalink to &quot;适用场景&quot;">​</a></h4><ul><li><strong>滚动事件</strong>：如处理滚动加载。</li><li><strong>窗口大小调整</strong>：如调整窗口大小时需要重新计算布局。</li></ul><h4 id="特点" tabindex="-1">特点 <a class="header-anchor" href="#特点" aria-label="Permalink to &quot;特点&quot;">​</a></h4><ul><li><strong>限制频率</strong>：在指定时间间隔内，只允许函数执行一次。</li><li><strong>适合高频率事件</strong>：可以确保函数不会被频繁调用，减轻性能压力。</li></ul><h4 id="实现示例-javascript" tabindex="-1">实现示例（JavaScript） <a class="header-anchor" href="#实现示例-javascript" aria-label="Permalink to &quot;实现示例（JavaScript）&quot;">​</a></h4><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> throttle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">wait</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lastTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> now</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (now </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lastTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> wait) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      lastTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> now;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      func.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, args);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 使用</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;scroll&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">throttle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Scroll event triggered&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre></div><h3 id="防抖-debouncing" tabindex="-1">防抖（Debouncing） <a class="header-anchor" href="#防抖-debouncing" aria-label="Permalink to &quot;防抖（Debouncing）&quot;">​</a></h3><h4 id="描述-4" tabindex="-1">描述 <a class="header-anchor" href="#描述-4" aria-label="Permalink to &quot;描述&quot;">​</a></h4><p>防抖是将函数的执行推迟到事件停止触发的一段时间之后。如果在这个时间段内事件再次触发，计时器将重新开始。简而言之，防抖会在事件触发后等待一段时间，如果在这段时间内没有再次触发事件，则执行函数。</p><h4 id="适用场景-1" tabindex="-1">适用场景 <a class="header-anchor" href="#适用场景-1" aria-label="Permalink to &quot;适用场景&quot;">​</a></h4><ul><li><strong>搜索框输入</strong>：如用户输入时实时搜索。</li><li><strong>窗口大小调整</strong>：如调整窗口大小后进行处理，但避免多次调用。</li></ul><h4 id="特点-1" tabindex="-1">特点 <a class="header-anchor" href="#特点-1" aria-label="Permalink to &quot;特点&quot;">​</a></h4><ul><li><strong>推迟执行</strong>：在事件触发后等待一段时间，如果事件再次触发，计时器会重新开始。</li><li><strong>适合低频率事件</strong>：可以避免函数在短时间内被多次调用。</li></ul><h4 id="实现示例-javascript-1" tabindex="-1">实现示例（JavaScript） <a class="header-anchor" href="#实现示例-javascript-1" aria-label="Permalink to &quot;实现示例（JavaScript）&quot;">​</a></h4><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> debounce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">wait</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> timeout;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    clearTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(timeout);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    timeout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      func.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, args);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }, wait);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 使用</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;input&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">input.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;input&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">debounce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Input event triggered&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre></div><h3 id="对比-1" tabindex="-1">对比 <a class="header-anchor" href="#对比-1" aria-label="Permalink to &quot;对比&quot;">​</a></h3><table tabindex="0"><thead><tr><th>特性</th><th>节流 (Throttling)</th><th>防抖 (Debouncing)</th></tr></thead><tbody><tr><td><strong>定义</strong></td><td>限制函数调用的频率</td><td>延迟函数调用，直到事件停止触发一段时间</td></tr><tr><td><strong>实现方式</strong></td><td>在指定时间间隔内只执行一次</td><td>在事件停止触发后等待一段时间才执行</td></tr><tr><td><strong>适用场景</strong></td><td>高频事件，如滚动、窗口调整</td><td>低频事件，如输入框、搜索</td></tr><tr><td><strong>频率控制</strong></td><td>固定时间间隔内执行一次</td><td>最终只执行一次，避免多次调用</td></tr><tr><td><strong>函数执行</strong></td><td>定期执行函数，避免频繁调用</td><td>只在事件结束后执行，避免过度调用</td></tr></tbody></table><p>通过合理使用节流和防抖，可以优化前端性能，减少不必要的函数调用，提升用户体验。</p></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><!----><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api-examples.md\":\"BOQfaJzo\",\"index.md\":\"BaosAqlq\",\"infrastructure_github.md\":\"B7s9WJzK\",\"knowledge_css.md\":\"CfvpvrOE\",\"knowledge_http.md\":\"9igHT8qL\",\"knowledge_js.md\":\"CyxJlkY_\",\"knowledge_manage.md\":\"B0mQGy86\",\"knowledge_vue.md\":\"DrfxTERQ\",\"knowledge_vue2-vue3.md\":\"BY5izN4K\",\"knowledge_vue2tovue3.md\":\"BDm_HkMn\",\"knowledge_ws.md\":\"D8HrIcAe\",\"markdown-examples.md\":\"C-fcJoaT\",\"specification_css.md\":\"CFUBZsNe\",\"specification_js.md\":\"BogDm6u7\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"修真\",\"description\":\"A VitePress Site\",\"base\":\"/site/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"基建\",\"items\":[{\"text\":\"静态站点\",\"link\":\"/Infrastructure/github\"}]},{\"text\":\"规范\",\"items\":[{\"text\":\"js\",\"link\":\"/specification/js\"},{\"text\":\"css\",\"link\":\"/specification/css\"}]},{\"text\":\"知识总结\",\"items\":[{\"text\":\"js\",\"link\":\"/knowledge/js\"},{\"text\":\"css\",\"link\":\"/knowledge/css\"},{\"text\":\"vue\",\"link\":\"/knowledge/vue\"},{\"text\":\"管理\",\"link\":\"/knowledge/manage\"},{\"text\":\"网络\",\"link\":\"/knowledge/http\"},{\"text\":\"vue2-vue3\",\"link\":\"/knowledge/vue2-vue3\"},{\"text\":\"vue2迁移vue3\",\"link\":\"/knowledge/vue2tovue3\"}]}],\"sidebar\":{\"/Infrastructure/\":[{\"text\":\"基建\",\"items\":[{\"text\":\"静态站点\",\"link\":\"/Infrastructure/github\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/vuejs/vitepress\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>